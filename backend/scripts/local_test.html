<!DOCTYPE html>
<html>
<head>
    <title>Local Camera Test</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        .camera { text-align: center; margin: 20px; }
        img { max-width: 100%; border: 2px solid #333; }
        .status { padding: 10px; margin: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>🎥 Local Camera Stream Test</h1>
    
    <div class="camera">
        <h3>Live Camera Feed</h3>
        <img id="camera" src="http://localhost:8554/feed.mjpg" 
             alt="Camera Stream"
             onload="showStatus('✅ Camera stream loaded successfully!', 'success')"
             onerror="showStatus('❌ Failed to load camera stream', 'error')">
    </div>
    
    <div id="status" class="status" style="display: none;"></div>
    
    <div class="status success">
        <strong>Test Instructions:</strong><br>
        1. If you see a live video feed above, the camera is working!<br>
        2. If you see an error, the camera stream needs to be started.<br>
        3. This test works locally on the Pi regardless of network issues.
    </div>
    
    <script>
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = 'status ' + type;
            status.style.display = 'block';
        }
        
        // Test server status
        fetch('http://localhost:8554/status')
            .then(response => response.json())
            .then(data => {
                console.log('Server status:', data);
            })
            .catch(error => {
                console.error('Server error:', error);
            });
    </script>
</body>
</html>
